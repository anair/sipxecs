<div jwcid="@common/Border">
  <div class="help">
    <span key="help.add"/>
    <br/>
    <span key="help.change"/>
  </div>
<h2 id="callgroup:edit"><span key="title">Call group</span></h2>
<span jwcid="@common/ErrorMsg"/>
<form jwcid="form@Form" delegate="bean:validator"
  listener="ognl:tapestry.treatUserExceptionAsValidationError(beans.validator, listeners.formSubmit)">
  <fieldset  jwcid="common@common/ItemCommon" item="prop:callGroup"
    useExtension="ognl:true" nameValidator="spring-validators:required,validSipUserId"/>
  <fieldset jwcid="ringTable@admin/UserRingTable" rings="prop:callGroup.rings"
    idConverter="prop:idConverter"/>
  <fieldset>
    <table>
      <tr jwcid="@common/FieldPanel"
        for="callgroup:voicemailFallback"
        label="message:label.voicemailFallback"
        description="message:description.voicemailFallback"
        field="component:voicemailFallback">
        <td jwcid="voicemailFallback@Checkbox"
          id="callgroup:voicemailFallback"
          value="prop:callGroup.voicemailFallback"
          displayName="message:label.voicemailFallback"
          onchange="javascript:this.form.submit();"
        />
      </tr>
      <span jwcid="@If" condition="ognl:!callGroup.voicemailFallback">
        <tr jwcid="@common/FieldPanel"
          for="callgroup:fallbackDestination"
          label="message:label.fallbackDestination"
          description="message:description.falbackDestination"
          field="component:fallbackDestination">
          <td jwcid="fallbackDestination@TextField"
            id="callgroup:fallbackDestination"
            value="prop:callGroup.fallbackDestination"
            validators="spring-validators:validPhoneOrAor"
            displayName="message:label.fallbackDestination"/>
        </tr>
	    </span>
      <tr jwcid="@common/FieldPanel"
        for="callgroup:userForward"
        label="message:label.userForward"
        description="message:description.userForward"
        field="component:userForward">
        <td jwcid="userForward@Checkbox"
          id="callgroup:userForward"
          value="prop:callGroup.userForward"
          displayName="message:label.userForward"
        />
      </tr>
    </table>
  </fieldset>
  <ul jwcid="formActions@common/FormActions" callback="ognl:callback"
    listener="listener:commit"/>
</form>
</div>
