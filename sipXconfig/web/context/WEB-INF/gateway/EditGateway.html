<div jwcid="@common/Border">
    <span jwcid="@gateway/GatewayNavigation" gateway="prop:gateway" dialingRuleId="prop:ruleId"/>
    <div jwcid="@common/LeftNavigation" renderCondition="ognl:!gateway.isNew()">
      <span jwcid="@setting/SettingsNavigation" bean="prop:gateway" 
          editSettingsListener="listener:editSettings" activeSetting="prop:currentSettingSet">
        <span jwcid="@For" source="prop:tabNames" value="prop:currentTab">
            <span jwcid="@common/Tab" isActive="ognl:currentTab.equals(activeTab)">
              <a jwcid="@DirectLink" id="ognl:'tab:' + currentTab" listener="listener:editNonSettings" parameters="prop:currentTab">
                <span jwcid="@Insert" value="ognl:messages.getMessage('tab.' + currentTab)"/>
              </a>
            </span>
        </span>
      </span>
    </div>
    <div jwcid="@common/ProfilePreview" device="prop:gateway"/>
    <div jwcid="@common/DeviceResources" deviceDescriptor="prop:gateway.model" />
  
  <div jwcid="@common/OptionalElement" id="settings-content" element="ognl:gateway.isNew()?'':'div'">
    <form jwcid="@Form" delegate="bean:validator" id="gateway">
      <span jwcid="@Hidden" value="prop:activeTab"/>

      <div jwcid="configBlock@Block">
        <fieldset jwcid="@gateway/GatewayForm" gateway="prop:gateway" selectedSbcDevice="ognl:selectedSbcDevice" />
      </div>

      <div jwcid="gcaiBlock@Block">
        <fieldset jwcid="@gateway/GatewayCallerAliasInfoPanel" gcai="prop:gateway.callerAliasInfo"/>
      </div>

      <div jwcid="dialplanBlock@Block">
        <fieldset>
          <table>
            <tbody>
              <label jwcid="@common/FieldPanel" for="gateway:prefix"
                field="component:gatewayPrefix"
                label="message:label.prefix"
                description="message:description.prefix">
                <input jwcid="gatewayPrefix@TextField" id="gateway:prefix" maxlength="10"
                  value="prop:gateway.prefix"
                  validators="spring-validators:validSipUserId"
                  displayName="message:label.prefix"/>
              </label>
            </tbody>
          </table>
        </fieldset>

        <fieldset jwcid="@dialplan/DialRulesPanel" gateway="ognl:gateway" />

      </div>
      
      <div jwcid="portsBlock@Block">
      	<fieldset jwcid="@gateway/port/GatewayPorts" 
          gateway="prop:gateway"
          editPortListener="listener:editPort"
          addPortListener="listener:addPort"/>
      	
      </div>
      
      <div jwcid="settingsBlock@Block">
          <fieldset jwcid="@setting/SettingsFieldset" settings="prop:currentSettingSet"/>
      </div>
                  
      <span jwcid="@common/ErrorMsg"/>
      <span jwcid="@RenderBlock" block="ognl:components.get(activeTab + 'Block')"/>
      <ul jwcid="@common/FormActions"
        listener="listener:saveGateway"
        callback="prop:callback"/>
    </form>    
  </div>
</div>
