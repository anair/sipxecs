Name: @PACKAGE@
Version: @VERSION@
Release: %{buildno}

# do not build a debuginfo package
%define debug_package %{nil}

Summary: sipXecs Enterprise Communications Server 
License: L-GPL
Group: Telecommunications
Vendor: SIPfoundry
Packager: SIPfoundry <sipx-dev@sipfoundry.org>
Url: http://www.sipfoundry.org

%define sipxconfiglib %{_datadir}/java/sipXecs/sipXconfig

Requires: sipxsupervisor >= 3.11
Requires: sipxproxy >= 3.11
Requires: sipxregistry >= 3.11
Requires: sipxconfig >= 3.11
Requires: sipxpublisher >= 3.11
Requires: sipxvxml >= 3.11
Requires: sipxpage >= 3.11
Requires: sipxacd >= 3.11
Requires: sipxproxy-cdr >= 3.11
Requires: sipxconfig-ftp >= 3.11
Requires: sipxconfig-tftp >= 3.11
Requires: sipxconfig-report >= 3.11
Requires: sipxconfig-agent >= 3.11
Requires: sipxconfig-mrtg >= 3.11
Requires: sipxfreeswitch >= 3.11
Requires: sipxbridge >= 3.11
Requires: sipx-freeswitch >= 1.0 
Requires: sipx-freeswitch-codec-passthru-g723_1 
Requires: sipx-freeswitch-codec-passthru-g729 
Requires: sipx-freeswitch-codec-passthru-amr 
Requires: sipxtools >= 3.11
Requires: sipxecs-doc >= 3.11
Requires: sipxivr >= 3.11

Source: %name-%version.tar.gz

Prefix: %_prefix
BuildRoot: %{_tmppath}/%name-%version-root

%description
sipXecs is an IP PBX with integrated voice mail, ACD, multiple auto attendents, and web-based system configuration and management tool.

%package devel
Requires: %name
Group: Development/Libraries
Vendor: SIPfoundry
Summary: Internal documentation for %name 
Requires: sipxproxy-devel >= 3.11
Requires: sipxregistry-devel >= 3.11
Requires: sipxpublisher-devel >= 3.11
Requires: sipxvxml-devel >= 3.11
Requires: sipxacd-devel >= 3.11

%description devel
Internal class documentation for the pbx classes

%prep
%setup -q

%build
%configure @CONFIGURE_OPTIONS@
make

%install
rm -rf $RPM_BUILD_ROOT
make DESTDIR=$RPM_BUILD_ROOT install

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(644,root,root,755)

%files devel
%defattr(644,root,root,755)

%post

%preun
