<?xml version="1.0" encoding="UTF-8"?>

<!-- DO NOT EDIT THIS FILE. It is generated by sipXconfig web ui -->
<nattraversal xmlns="http://www.sipfoundry.org/sipX/schema/xml/nattraversalrules-00-00">
#set($relay=${service.getSettings().getSetting('relay-config')})
#set($nat=${service.getSettings().getSetting('nat')})
#set($behindnat=${nat.getSetting('behind-nat').Value})
  <info>
    <state>${nat.getSetting('enabled').Value}</state>
    <behindnat>$behindnat</behindnat>
#if($behindnat == 'true')
    <useSTUN>${natlocation.useStun}</useSTUN>
#if(${natlocation.useStun})
    <stun-server-address>${natlocation.stunAddress}</stun-server-address>
    <rediscovery-time>${natlocation.stunInterval}</rediscovery-time>
#else
    <publicaddress>${natlocation.publicAddress}</publicaddress>
#end
#else
    <useSTUN>false</useSTUN>
#end
    <publicport>${natlocation.publicPort}</publicport>
    <proxyhostport>${location.address}:${proxyService.sipPort}</proxyhostport>
    <mediarelayxml-rpc-port>${service.xmlRpcPort}</mediarelayxml-rpc-port>
    <relayaggressiveness>${nat.getSetting('media-relay-temperament').Value}</relayaggressiveness>
    <mediarelaynativeaddress>${location.address}</mediarelaynativeaddress>
    <concurrentrelays>50</concurrentrelays>
    <port-range>${natlocation.startRtpPort}:${natlocation.stopRtpPort}</port-range>
    <log-level>${relay.getSetting('SIP_RELAY_LOG_LEVEL').Value}</log-level>
    <log-directory>${service.logDir}</log-directory>
  </info>
  <localtopology>
#foreach($subnet in ${routes.subnets})
    <ipV4subnet>$subnet</ipV4subnet>
#end
#foreach($domain in ${routes.domains})
    <dnsWildcard>$domain</dnsWildcard>
#end
  </localtopology>
</nattraversal>
