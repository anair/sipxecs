<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

  <!--
    SpringBeanRouter finds all resources in the application context. Aliases starting from '/' are bind as routes for
    referenced resources.
  -->
  <bean id="restletSpringBeanRouter" class="org.restlet.ext.spring.SpringBeanRouter" />

  <bean id="phonebookResource" class="org.sipfoundry.sipxconfig.rest.PhonebookResource" scope="prototype">
    <property name="phonebookManager" ref="phonebookManager" />
    <property name="modifiable" value="false" />
  </bean>
  <alias name="phonebookResource" alias="/phonebook/{name}" />

  <bean id="phonebooksResource" class="org.sipfoundry.sipxconfig.rest.PhonebooksResource" scope="prototype">
    <property name="phonebookManager" ref="phonebookManager" />
    <property name="modifiable" value="false" />
  </bean>
  <alias name="phonebooksResource" alias="/phonebook" />

  <bean id="userPhonebookResource" class="org.sipfoundry.sipxconfig.rest.UserPhonebookSearchResource" scope="prototype">
    <property name="phonebookManager" ref="phonebookManager" />
    <property name="coreContext" ref="coreContext" />
    <property name="modifiable" value="false" />
    <property name="readable" value="true" />
  </bean>
  <alias name="userPhonebookResource" alias="/my/search/phonebook?query={search-term}" />

  <bean id="userPhonebookResourceAll" class="org.sipfoundry.sipxconfig.rest.UserPhonebookResource" parent="userPhonebookResource">
    <property name="readable" value="true" />
  </bean>
  <alias name="userPhonebookResourceAll" alias="/my/phonebook" />

  <bean id="callResource" class="org.sipfoundry.sipxconfig.rest.CallResource" scope="prototype">
    <property name="sipService" ref="sip" />
    <property name="domainManager" ref="domainManager" />
    <property name="coreContext" ref="coreContext" />
    <property name="available" value="false" />
    <property name="readable" value="false" />
  </bean>
  <alias name="callResource" alias="/call/{to}" />

  <bean id="voicemailPinResource" class="org.sipfoundry.sipxconfig.rest.VoicemailPinResource" scope="prototype">
    <property name="domainManager" ref="domainManager" />
    <property name="coreContext" ref="coreContext" />
    <property name="available" value="false" />
    <property name="readable" value="false" />
  </bean>
  <alias name="voicemailPinResource" alias="/my/voicemail/pin/{pin}" />

  <bean id="forwardingResource" class="org.sipfoundry.sipxconfig.rest.ForwardingResource" scope="prototype">
    <property name="coreContext" ref="coreContext" />
    <property name="forwardingContext" ref="forwardingContext" />
    <property name="available" value="true" />
    <property name="modifiable" value="true" />
  </bean>
  <alias name="forwardingResource" alias="/my/forward" />

  <bean id="voicemailResource" class="org.sipfoundry.sipxconfig.rest.VoicemailResource" scope="prototype">
    <property name="coreContext" ref="coreContext" />
    <property name="mailboxManager" ref="mailboxManager" />
    <property name="available" value="true" />
    <property name="modifiable" value="false" />
  </bean>
  <alias name="voicemailResource" alias="/my/feed/voicemail/{folder}" />

  <bean id="contactInformationResource" class="org.sipfoundry.sipxconfig.rest.ContactInformationResource" scope="prototype">
    <property name="coreContext" ref="coreContext" />
    <property name="available" value="true" />
    <property name="readable" value="true" />
    <property name="modifiable" value="true" />
  </bean>
  <alias name="contactInformationResource" alias="/my/contact-information" />
</beans>
